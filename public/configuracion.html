<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Configuración del Sistema - ScaffoldPro</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link rel="stylesheet" href="theme-dark.css">
  <link rel="stylesheet" href="styles/configuracion.css">
  <script src="theme.js"></script>
  <script src="js/auth.js"></script>
  </head>
<body>
  <aside class="sidebar">
    <div class="logo">ScaffoldPro</div>
    <ul>
        <li><a href="dashboard.html"><i class="fa fa-house"></i> Dashboard</a></li>
        <li><a href="inventario.html"><i class="fa fa-cube"></i> Inventario</a></li>
        <li><a href="cotizaciones.html"><i class="fa fa-file-lines"></i> Cotización</a></li>
        <li><a href="contratos.html"><i class="fa fa-file-contract"></i> Contratos</a></li>
        <li><a href="clientes.html"><i class="fa fa-users"></i> Clientes</a></li>
        <li><a href="facturacion.html"><i class="fa fa-file-invoice-dollar"></i> Facturación</a></li>
        <li><a href="ventas.html"><i class="fa fa-chart-line"></i> Ventas</a></li>
        <li><a href="logistica.html"><i class="fa fa-truck"></i> Logística</a></li>
        <li><a href="analisis.html"><i class="fa fa-chart-bar"></i> Análisis</a></li>
        <li><a href="mantenimiento.html"><i class="fa fa-screwdriver-wrench"></i> Mantenimientos</a></li>
        <li><a href="proyectos.html"><i class="fa fa-diagram-project"></i> Proyectos</a></li>
        <li><a href="calidad.html"><i class="fa fa-shield-halved"></i> Calidad</a></li>
        <li><a href="notificaciones.html"><i class="fa fa-bell"></i> Notificaciones</a></li>
        <li><a href="configuracion.html" class="active"><i class="fa fa-gear"></i> Configuración</a></li>
      </ul>
  </aside>
  <div class="main-content">
    <div class="config-header">
      <div>
        <div class="config-title">Configuración del Sistema</div>
        <div class="config-desc">Gestiona la configuración general del sistema y preferencias</div>
      </div>
      <div class="config-actions">
        <button class="reset-btn">Restablecer</button>
        <button class="save-btn"><i class="fa fa-save"></i> Guardar Cambios</button>
      </div>
    </div>
    <div class="config-panel">
      <nav class="config-nav">
        <button class="config-nav-btn active"><i class="fa fa-gear"></i> General</button>
        <button class="config-nav-btn"><i class="fa fa-building"></i> Empresa</button>
        <button class="config-nav-btn"><i class="fa fa-users"></i> Usuarios</button>
        <button class="config-nav-btn"><i class="fa fa-shield"></i> Seguridad</button>
        <button class="config-nav-btn"><i class="fa fa-bell"></i> Notificaciones</button>
        <button class="config-nav-btn"><i class="fa fa-cube"></i> Inventario</button>
        <button class="config-nav-btn"><i class="fa fa-file-invoice-dollar"></i> Facturación</button>
        <button class="config-nav-btn"><i class="fa fa-file-alt"></i> Reportes</button>
        <button class="config-nav-btn"><i class="fa fa-database"></i> Sistema</button>
        <button class="config-nav-btn"><i class="fa fa-palette"></i> Apariencia</button>
      </nav>
      <section class="config-section" id="section-general">
        <h2>Configuración General</h2>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Nombre del Sistema</label>
            <input class="form-input" type="text" value="ScaffoldPro" />
          </div>
          <div class="form-group">
            <label class="form-label">Zona Horaria</label>
            <select class="form-select">
              <option>America/Mexico_City</option>
              <option>America/New_York</option>
              <option>America/Los_Angeles</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Idioma</label>
            <select class="form-select">
              <option>Español</option>
              <option>English</option>
              <option>Français</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Moneda</label>
            <select class="form-select">
              <option>MXN - Peso Mexicano</option>
              <option>USD - Dólar Americano</option>
              <option>EUR - Euro</option>
            </select>
          </div>
        </div>
      </section>
      <section class="config-section" id="section-empresa" style="display:none;">
        <h2>Información de la Empresa</h2>
        <div class="form-group">
          <label class="form-label">Nombre de la Empresa</label>
          <input class="form-input" id="empresa-nombre" type="text" />
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">RFC</label>
            <input class="form-input" type="text" value="AAP123456789" />
          </div>
          <div class="form-group">
            <label class="form-label">Teléfono</label>
            <input class="form-input" type="text" value="+52 55 1234-5678" />
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Dirección</label>
          <textarea class="form-input" style="resize:vertical;min-height:40px;">Av. Industrial 123, Col. Centro, Ciudad de México, CP 01000</textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Email</label>
            <input class="form-input" type="email" value="contacto@scaffoldpro.com" />
          </div>
          <div class="form-group">
            <label class="form-label">Sitio Web</label>
            <input class="form-input" type="url" value="https://www.scaffoldpro.com" />
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Logo de la Empresa</label>
           <div class="logo-upload">
            <img class="logo-preview" id="logo-preview" src="img/LOGO_ANDAMIOS_02.png" alt="Logo" />
            <input type="file" id="logo-input" accept="image/png, image/jpeg" style="display:none;" />
            <button class="upload-btn" id="logo-upload-btn" type="button"><i class="fa fa-upload"></i> Cambiar Logo</button>
          </div>
          <div class="info-text">JPG, PNG hasta 2MB. Recomendado: 200x200px</div>
        </div>
      </section>
      <section class="config-section" id="section-usuarios" style="display:none;">
        <h2>Gestión de Usuarios</h2>
        <button id="btnAgregarUsuario" style="background:#2979ff;color:#fff;border:none;border-radius:10px;padding:10px 22px;font-size:1.1rem;font-weight:600;display:flex;align-items:center;gap:8px;cursor:pointer;margin-bottom:18px;"><i class="fa fa-user-plus"></i> Agregar Usuario</button>
        <table id="usuarios-table" style="width:100%;border-collapse:collapse;background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(41,121,255,0.04);">
          <thead style="background:#f7f9fb;">
            <tr>
              <th style="padding:14px 8px;text-align:left;color:#232323;font-weight:700;">Foto</th>
              <th style="padding:14px 8px;text-align:left;color:#232323;font-weight:700;">Nombre</th>
              <th style="padding:14px 8px;text-align:left;color:#232323;font-weight:700;">Correo</th>
              <th style="padding:14px 8px;text-align:left;color:#232323;font-weight:700;">Rol</th>
              <th style="padding:14px 8px;text-align:left;color:#232323;font-weight:700;">Estado</th>
              <th style="padding:14px 8px;text-align:left;color:#232323;font-weight:700;">Acciones</th>
            </tr>
          </thead>
          <tbody id="usuarios-tbody">
            <tr><td colspan="5" style="padding:18px;text-align:center;color:#888;">Cargando usuarios...</td></tr>
          </tbody>
        </table>
      </section>
      <section class="config-section" id="section-seguridad" style="display:none;">
        <h2>Configuración de Seguridad</h2>
        <div class="form-group">
          <label class="form-label">Autenticación de Dos Factores</label>
          <label class="switch"><input type="checkbox" checked><span class="slider"></span></label>
          <div class="info-text">Añade una capa extra de seguridad a tu cuenta</div>
        </div>
        <div class="form-group">
          <label class="form-label">Sesiones Múltiples</label>
          <label class="switch"><input type="checkbox"><span class="slider"></span></label>
          <div class="info-text">Permitir múltiples sesiones activas por usuario</div>
        </div>
        <div class="form-group">
          <label class="form-label">Bloqueo Automático</label>
          <select class="form-select">
            <option>15 minutos</option>
            <option>30 minutos</option>
            <option>1 hora</option>
          </select>
          <div class="info-text">Bloquear sesión después de inactividad</div>
        </div>
        <h3 style="margin-top:32px;">Políticas de Contraseña</h3>
        <div class="form-group">
          <label class="form-label">Longitud Mínima</label>
          <input class="form-input" type="number" min="6" value="8" />
        </div>
        <div class="form-check"><input type="checkbox" checked> Requerir mayúsculas</div>
        <div class="form-check"><input type="checkbox" checked> Requerir números</div>
        <div class="form-check"><input type="checkbox" checked> Requerir caracteres especiales</div>
      </section>
      <section class="config-section" id="section-notificaciones" style="display:none;">
        <h2>Configuración de Notificaciones</h2>
        <div class="form-group">
          <b>Alertas de Inventario</b><br>
          <div class="form-check"><input type="checkbox" checked> Stock bajo</div>
          <div class="form-check"><input type="checkbox" checked> Equipos en mantenimiento</div>
        </div>
        <div class="form-group">
          <b>Contratos y Facturación</b><br>
          <div class="form-check"><input type="checkbox" checked> Contratos próximos a vencer</div>
          <div class="form-check"><input type="checkbox" checked> Pagos vencidos</div>
        </div>
        <div class="form-group">
          <b>Métodos de Entrega</b><br>
          <div class="form-check"><input type="checkbox" checked> Notificaciones por email</div>
          <div class="form-check"><input type="checkbox"> Notificaciones SMS</div>
        </div>
      </section>
      <section class="config-section" id="section-inventario" style="display:none;">
        <h2>Configuración de Inventario</h2>
        <div class="info-text">Opciones de inventario próximamente.</div>
      </section>
      <section class="config-section" id="section-facturacion" style="display:none;">
        <h2>Configuración de Facturación</h2>
        <form id="form-emisor-config" style="margin-bottom:32px;">
          <h3>Datos Generales del Emisor</h3>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="emisor-rfc">RFC</label>
              <input class="form-input" type="text" id="emisor-rfc" maxlength="13" required />
            </div>
            <div class="form-group">
              <label class="form-label" for="emisor-razon">Razón Social</label>
              <input class="form-input" type="text" id="emisor-razon" required />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="emisor-regimen">Régimen Fiscal</label>
              <select class="form-select" id="emisor-regimen" required>
                <option value="">Selecciona...</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="emisor-cp">Código Postal</label>
              <input class="form-input" type="text" id="emisor-cp" maxlength="5" required />
            </div>
          </div>
          <button class="save-btn" id="btn-guardar-emisor" type="submit">Guardar Datos del Emisor</button>
          <div id="emisor-config-feedback" class="info-text"></div>
        </form>
        <form id="form-csd-upload">
          <h3>Paso 3. Sellos digitales</h3>
          <div class="info-text">Es importante que subas tus sellos digitales, ya que sin ellos no podrás emitir facturas.</div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="csd-cer">Sube tu archivo .CER</label>
              <input class="form-input" type="file" id="csd-cer" accept=".cer" required />
            </div>
            <div class="form-group">
              <label class="form-label" for="csd-key">Sube tu archivo .KEY</label>
              <input class="form-input" type="file" id="csd-key" accept=".key" required />
            </div>
            <div class="form-group">
              <label class="form-label" for="csd-pass">Contraseña de los sellos digitales</label>
              <input class="form-input" type="password" id="csd-pass" required />
            </div>
          </div>
          <button class="upload-btn" id="btn-cargar-csd" type="submit">Cargar archivos</button>
          <div id="csd-upload-feedback" class="info-text"></div>
        </form>
      </section>
      <section class="config-section" id="section-reportes" style="display:none;">
        <h2>Configuración de Reportes</h2>
        <div class="info-text">Opciones de reportes próximamente.</div>
      </section>
      <section class="config-section" id="section-sistema" style="display:none;">
        <h2>Configuración del Sistema</h2>
        <div class="form-group">
          <b>Respaldo de Datos</b><br>
          <div class="form-check"><input type="checkbox" checked> Respaldo automático</div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Frecuencia de respaldo</label>
              <select class="form-select">
                <option>Diario</option>
                <option>Semanal</option>
                <option>Mensual</option>
              </select>
            </div>
            <div class="form-group" style="display:flex;align-items:end;gap:8px;">
              <button class="upload-btn"><i class="fa fa-download"></i> Descargar Respaldo</button>
              <button class="upload-btn"><i class="fa fa-upload"></i> Restaurar Respaldo</button>
            </div>
          </div>
        </div>
        <div class="form-group">
          <b>Mantenimiento del Sistema</b><br>
          <div class="form-check"><input type="checkbox"> Modo mantenimiento</div>
          <div class="form-check"><input type="checkbox" checked> Actualizaciones automáticas</div>
        </div>
        <div class="form-group">
          <b>Información del Sistema</b><br>
          <div class="info-text">Versión: v2.1.0<br>Última actualización: 15 Enero 2024<br>Base de datos: PostgreSQL 14.2<br>Espacio usado: 2.4 GB / 10 GB</div>
        </div>
      </section>
      <section class="config-section" id="section-apariencia" style="display:none;">
        <h2>Configuración de Apariencia</h2>
        <div class="form-group">
          <label class="form-label">Tema</label>
          <select class="form-select" id="theme-select">
            <option value="light">Claro</option>
            <option value="dark">Oscuro</option>
            <option value="system">Sistema</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Color Primario</label>
          <input type="color" id="primary-color-picker" value="#2979ff" style="width:48px;height:36px;border:none;background:none;cursor:pointer;" />
        </div>
        <div class="info-text">Elige el tema y color principal de la aplicación. Se aplicará en tiempo real.</div>
      </section>
    </div>
    <!-- Modal Agregar Usuario -->
    <div id="modalAgregarUsuario" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);z-index:200;align-items:center;justify-content:center;">
      <div style="background:#fff;padding:32px 28px 22px 28px;border-radius:16px;min-width:350px;max-width:98vw;max-height:92vh;overflow-y:auto;box-shadow:0 2px 16px rgba(41,121,255,0.13);position:relative;">
        <span id="closeAgregarUsuario" style="position:absolute;top:12px;right:18px;font-size:1.5rem;cursor:pointer;color:#888;">&times;</span>
        <h2 style="margin-top:0;margin-bottom:18px;font-size:1.3rem;font-weight:700;">Agregar Usuario</h2>
        <form id="formAgregarUsuario">
          <div style="margin-bottom:12px;"><label>Nombre</label><input id="add-nombre" type="text" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;" /></div>
          <div style="margin-bottom:12px;"><label>Correo</label><input id="add-correo" type="email" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;" /></div>
          <div style="margin-bottom:12px;"><label>Contraseña</label><input id="add-password" type="password" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;" /></div>
          <div style="margin-bottom:12px;"><label>Confirmar Contraseña</label><input id="add-password2" type="password" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;" /></div>
          <div style="margin-bottom:12px;"><label>Rol</label><select id="add-rol" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;">
            <option>Rentas</option><option>Admin</option><option>Operador</option><option>Ventas</option><option>Recepción</option><option>Contabilidad</option><option>Director General</option><option>Ingeniero en Sistemas</option><option>Ingeniero en Calidad</option><option>Ingeniero en Proyectos</option>
          </select></div>
          <div style="margin-bottom:12px;">
            <label>Foto de perfil</label>
            <input id="add-foto-file" type="file" accept="image/*" style="display:block;margin-bottom:6px;">
            <input id="add-foto" type="hidden">
            <img id="add-foto-preview" src="img/default-user.png" style="width:48px;height:48px;border-radius:50%;object-fit:cover;display:none;">
          </div>
          <div style="margin-bottom:18px;"><label>Estado</label><select id="add-estado" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;">
            <option>Activo</option><option>Inactivo</option>
          </select></div>
          <button type="submit" style="background:#2979ff;color:#fff;border:none;border-radius:8px;padding:12px 0;font-size:1.1rem;font-weight:600;width:100%;">Crear Usuario</button>
        </form>
      </div>
    </div>
    
    <!-- Modal Editar Usuario -->
    <div id="modalEditarUsuario" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.18);z-index:200;align-items:center;justify-content:center;">
      <div style="background:#fff;padding:32px 28px 22px 28px;border-radius:16px;min-width:350px;max-width:98vw;max-height:92vh;overflow-y:auto;box-shadow:0 2px 16px rgba(41,121,255,0.13);position:relative;">
        <span id="closeEditarUsuario" style="position:absolute;top:12px;right:18px;font-size:1.5rem;cursor:pointer;color:#888;">&times;</span>
        <h2 style="margin-top:0;margin-bottom:18px;font-size:1.3rem;font-weight:700;">Editar Usuario</h2>
        <form id="formEditarUsuario">
          <div style="margin-bottom:12px;"><label>Nombre</label><input id="edit-nombre" type="text" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;" /></div>
          <div style="margin-bottom:12px;"><label>Correo</label><input id="edit-correo" type="email" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;" /></div>
          <div style="margin-bottom:12px;"><label>Rol</label><select id="edit-rol" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;">
            <option>Rentas</option><option>Admin</option><option>Operador</option><option>Ventas</option><option>Recepción</option><option>Contabilidad</option><option>Director General</option><option>Ingeniero en Sistemas</option><option>Ingeniero en Calidad</option><option>Ingeniero en Proyectos</option>
          </select></div>
          <div style="margin-bottom:12px;">
            <label>Foto de perfil</label>
            <input id="edit-foto-file" type="file" accept="image/*" style="display:block;margin-bottom:6px;">
            <input id="edit-foto" type="hidden">
            <img id="edit-foto-preview" src="img/default-user.png" style="width:48px;height:48px;border-radius:50%;object-fit:cover;display:none;">
          </div>
          <div style="margin-bottom:18px;"><label>Estado</label><select id="edit-estado" required style="width:100%;padding:10px 12px;border-radius:8px;border:1px solid #e3e8ef;">
            <option>Activo</option><option>Inactivo</option>
          </select></div>
          <button type="submit" style="background:#2979ff;color:#fff;border:none;border-radius:8px;padding:12px 0;font-size:1.1rem;font-weight:600;width:100%;">Guardar</button>
        </form>
      </div>
    </div>
   
  <script src="scripts/configuracion.js"></script>
</body>
</html>